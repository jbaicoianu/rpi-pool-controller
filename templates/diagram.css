/* Shared styles for all diagram custom elements
   Loaded into each shadow root so you can tweak in one place. */

:host { contain: content; }

/* -------------------- <pool-diagram> -------------------- */
:host(pool-diagram) .diagram {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-areas:
    "suction pump"
    "return heater";
  gap: 18px;
  align-items: center;
}

:host(pool-diagram) .col { display: grid; justify-items: center; gap: 10px; }
:host(pool-diagram) .label { color: var(--muted, #9aa4b2); font-size: .9rem; }


/* -------------------- <pool-equipment-valve> -------------------- */
:host(pool-equipment-valve) {
  position: relative;
  z-index: 10;
}
:host(pool-equipment-valve) .wrap {
  position: relative; width: 220px; height: 140px;
}
/* Pipes */
:host(pool-equipment-valve) .pipe {
  position: absolute;
  background: #162038;
  border: 1px solid rgba(255,255,255,.06);
  box-shadow: inset 0 0 12px rgba(0,0,0,.5);
}
/* Individual port pipes - all same length for consistent connection offsets */
:host(pool-equipment-valve) .pipe.left-pipe {
  width: 50px; height: 18px; 
  left: 50px; top: 61px; 
  border-radius: 12px;
}
:host(pool-equipment-valve) .pipe.right-pipe {
  width: 50px; height: 18px; 
  right: 50px; top: 61px; 
  border-radius: 12px;
}
:host(pool-equipment-valve) .pipe.bottom-pipe {
  width: 18px; height: 50px; 
  left: 101px; bottom: 0px; 
  border-radius: 12px;
}
:host(pool-equipment-valve) .flow {
  background: linear-gradient(90deg, #60a5fa, #3b82f6);
  box-shadow: inset 0 0 18px rgba(96,165,250,.35);
}

/* Partial flow intensity classes */
:host(pool-equipment-valve) .flow_10pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.1; }
:host(pool-equipment-valve) .flow_20pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.2; }
:host(pool-equipment-valve) .flow_30pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.3; }
:host(pool-equipment-valve) .flow_40pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.4; }
:host(pool-equipment-valve) .flow_50pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.5; }
:host(pool-equipment-valve) .flow_60pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.6; }
:host(pool-equipment-valve) .flow_70pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.7; }
:host(pool-equipment-valve) .flow_80pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.8; }
:host(pool-equipment-valve) .flow_90pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 0.9; }
:host(pool-equipment-valve) .flow_100pct { background: linear-gradient(90deg, #60a5fa, #3b82f6); opacity: 1.0; }
/* Valve body */
:host(pool-equipment-valve) .body {
  position: absolute; left: 80px; top: 49px; width: 60px; height: 60px; border-radius: 999px;
  background: #0c1326; border: 1px solid rgba(255,255,255,.12);
  box-shadow: inset 0 6px 18px rgba(0,0,0,.55), 0 10px 30px rgba(0,0,0,.25);
}
:host(pool-equipment-valve) .handle {
  position: absolute; left: 50%; top: 50%;
  width: 64px; height: 12px; border-radius: 8px;
  transform-origin: 100% 50%;           /* ✅ pivot at right edge */
  transform: translate(-100%, -50%);    /* ✅ anchor pivot to cap center */
  background: linear-gradient(180deg, #e8edf9, #a8b9de);
  border: 1px solid rgba(0,0,0,.3);
  box-shadow: 0 2px 6px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.6);
}
:host(pool-equipment-valve) .cap {
  position: absolute; left: 50%; top: 50%; width: 18px; height: 18px; border-radius: 999px;
  transform: translate(-50%,-50%);
  background: #d3dcf2; border: 1px solid rgba(0,0,0,.25);
  box-shadow: inset 0 1px 2px rgba(255,255,255,.5);
}
:host(pool-equipment-valve) .tag {
  position: absolute; bottom: 6px; left: 50%; transform: translateX(-50%);
  font: 600 .8rem/1 ui-sans-serif; color: var(--muted, #9aa4b2);
}

/* Working breath on the handle */
:host(pool-equipment-valve).working .body {
  box-shadow: inset 0 6px 18px rgba(0,0,0,.55),
              0 0 0 2px rgba(245,209,95,.3),
              0 10px 26px rgba(245,209,95,.25);
}
:host(pool-equipment-valve).working .handle {
  animation: valve-breath 1.4s ease-in-out infinite;
}
@keyframes valve-breath {
  0% { filter: brightness(100%); }
  50% { filter: brightness(120%); }
  100% { filter: brightness(100%); }
}

/* -------------------- <pool-equipment-pump> -------------------- */
:host(pool-equipment-pump) .pump {
  width: 160px; height: 120px; position: relative; border-radius: 16px;
  background: #0f162c; /* off */
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: inset 0 8px 22px rgba(0,0,0,.5);
  transition: background .25s ease, box-shadow .25s ease;
}
/* Whole-card color by speed */
:host(pool-equipment-pump) .pump.on.low {
  background:
    linear-gradient(180deg, rgba(60,120,80,.35), rgba(30,80,50,.25)),
    #103022;
  box-shadow:
    inset 0 8px 22px rgba(0,0,0,.45),
    0 0 0 2px rgba(43,213,118,.18),
    0 0 40px rgba(43,213,118,.22);
}
:host(pool-equipment-pump) .pump.on.high {
  background:
    linear-gradient(180deg, rgba(90,200,120,.45), rgba(30,120,60,.35)),
    #0e3a28;
  box-shadow:
    inset 0 8px 22px rgba(0,0,0,.45),
    0 0 0 2px rgba(43,213,118,.28),
    0 0 60px rgba(43,213,118,.35);
}
:host(pool-equipment-pump) .round {
  position: absolute; left: 50%; top: 48%; transform: translate(-50%,-50%);
  width: 65px;          /* was 86px */
  height: 65px;         /* was 86px */
  border-radius: 999px;
  background: radial-gradient(circle at 30% 30%, #eaf0ff, #c3d0f0 45%, #9fb2e1 70%, #7f93c9);
  border: 1px solid rgba(0,0,0,.25);
  box-shadow: 0 12px 28px rgba(0,0,0,.45), inset 0 2px 8px rgba(255,255,255,.5);
}
:host(pool-equipment-pump) .status {
  position: absolute; left: 50%; bottom: 8px; transform: translateX(-50%);
  font: 700 .8rem/1 ui-sans-serif; color: var(--muted, #9aa4b2);
}
@keyframes pump-spin { to { transform: translate(-50%,-50%) rotate(360deg); } }

/* -------------------- <pool-equipment-heater> -------------------- */
:host(pool-equipment-heater) .heater {
  width: 160px; height: 80px; border-radius: 12px;
  background: #0f162c; /* off */
  border: 1px solid rgba(255,255,255,.08);
  display: grid; place-items: center; position: relative;
  box-shadow: inset 0 8px 22px rgba(0,0,0,.5);
  transition: background .25s ease, box-shadow .25s ease, color .25s ease;
}
:host(pool-equipment-heater) .heater.on {
  background:
    linear-gradient(180deg, rgba(224,79,79,.35), rgba(120,25,25,.30)),
    #2a0e10;
  box-shadow:
    inset 0 8px 22px rgba(0,0,0,.45),
    0 0 0 2px rgba(224,79,79,.25),
    0 0 50px rgba(224,79,79,.35);
}
:host(pool-equipment-heater) .txt {
  font: 700 .9rem/1 ui-sans-serif; letter-spacing: .5px; color: var(--muted, #9aa4b2);
}

pool-equipment-valve#return {
  position: relative;
  top: 0;
}
pool-equipment-valve#suction {
  position: relative;
  top: 0px;
}
